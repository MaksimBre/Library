@model Library.PresentationLayer.Web.Models.BookModel
@using Library.PresentationLayer.Web.Models
@using Library.BusinessLogicLayer.Managers
@using Library.PresentationLayer.Web.Helpers

@using (Html.BeginForm("Save", "Book", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <div class="lib-writer-table-row">
        @Html.HiddenFor(model => Model.Id)
        <div>@Html.EditorFor(model => Model.Title, new { htmlAttributes = new { @class = "lib-transparent-input" } }) </div>
        <div class="p10">@Html.EditorFor(model => Model.NoOfPages, new { htmlAttributes = new { @class = "lib-transparent-input" } }) </div>
        <div class="p10">@Html.EditorFor(model => Model.StockCount, new { htmlAttributes = new { @class = "lib-transparent-input" } })</div>

        @*dropdownlist*@
        <div>@Html.DisplayFor(model => Model.Writer.Name, new { htmlAttributes = new { @class = "lib-transparent-input" } }) </div>

        <div>
            @{
                Genres GenreManager = new Genres();
                IEnumerable<GenreModel> genres = GenreManager.GetByBookId(Model.Id).Select(x => (GenreModel)x);
                int count = genres.Count() - 1;
                int i = 0;
                foreach (GenreModel genre in genres)
                {
                    @Html.Raw(genre.Name)
                    if (i != count)
                    {
                        @Html.Raw(", ")
                    }
                    i++;
                }
            }
        </div>
        <div>
            <input type="submit" value="Save" class="btn btn-success btn-xs" />
            @Html.ActionLink("Rent", "RentBook", "Rent", new { id = Model.Id }, new { @class = "btn btn-info btn-xs rent-button" })
            @Html.ActionLink("Delete", "Delete", "Book", new { id = Model.Id }, new { @class = "btn btn-warning btn-xs" })
            @Html.ActionLink("Genres", "GenreManager", "Book", new { id = Model.Id }, new { @class = "btn btn-default btn-xs" })
        </div>

    </div>
                }
